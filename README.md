# 剧本杀 - 交互式视觉小说游戏

基于 Vue.js 构建的现代视觉小说游戏，具有创新的角色审讯系统、动态对话机制和可自定义的用户界面。使用 TypeScript 开发，专为沉浸式叙事体验而设计。

## 🆕 最新更新

### 用户个人中心 (2025-07-17)

- ✅ **个人资料界面**：全新的用户个人中心页面，展示用户信息和游戏统计
- ✅ **游戏历史记录**：查看最近游戏的详细记录，包括结果、得分和游戏时长
- ✅ **动态胜率饼图**：交互式饼图展示胜率，支持悬浮提示和点击高亮
- ✅ **动画数据可视化**：所有图表支持入场动画和重新触发效果
- ✅ **成就系统**：展示已获得和进行中的成就，包含稀有度和进度条动画
- ✅ **剧本推荐**：基于用户喜好的个性化剧本推荐系统
- ✅ **月度进展图表**：柱状图展示每月游戏场次和胜利次数趋势，支持延迟动画
- ✅ **交互式图例**：可点击的图例，支持悬浮效果和进度条动画
- ✅ **性能优化**：支持减少动画偏好设置，移动设备动画优化
- ✅ **响应式设计**：适配移动端和桌面端的个人中心界面
- ✅ **路由集成**：新增 `/profile` 路由，从主页用户菜单可直接访问

### 主页系统 (2025-07-14)

- ✅ **新增主页界面**：美观的剧本选择页面，支持剧本浏览、搜索和分类筛选
- ✅ **路由系统**：集成 Vue Router 4，支持主页 (`/`) 和游戏界面 (`/game/:scriptId`) 路由
- ✅ **剧本展示**：网格布局展示多个剧本，包含封面、标签、难度、时长等信息
- ✅ **详情面板**：点击剧本查看详细信息，包括故事简介、角色列表和游戏统计
- ✅ **搜索功能**：支持按剧本名称、作者或标签搜索
- ✅ **分类筛选**：按类型筛选剧本（悬疑、硬核、恐怖、情感、欢乐）
- ✅ **分页功能**：支持大量剧本的分页浏览
- ✅ **响应式设计**：适配不同屏幕尺寸的设备
- ✅ **游戏跳转**：从主页直接跳转到选中的剧本游戏界面
- ✅ **返回主页**：游戏界面新增返回主页按钮

## 🎮 项目概述

剧本杀是一款交互式视觉小说，将传统叙事与现代 AI 驱动的角色互动相结合。玩家可以与多个角色互动、进行审讯，并通过直观且可自定义的界面探索复杂的叙事情节。

### 核心功能

- **角色审讯系统**：具有多个 AI 模型的交互式询问系统，代表不同角色
- **动态对话系统**：实时打字效果、场景转换和角色特定回应
- **可自定义 UI 布局**：可拖拽和调整大小的面板，主游戏区域和侧边栏默认 70%/30% 分割
- **多 AI 集成**：支持多个 AI 提供商（DeepSeek、OpenAI GPT-4、Qwen、Claude），具有角色特定个性
- **丰富的角色数据库**：详细的角色档案，包含背景故事、不在场证明、秘密和关系网
- **场景管理**：动态背景系统，具有流畅转换和氛围效果
- **问题模板**：预构建的问题分类，用于高效审讯（案件调查、时间线、关系、动机）
- **对话历史**：跟踪和回顾与角色的先前互动
- **个人中心系统**：完整的用户资料管理，包含游戏统计、成就系统和个性化推荐
- **数据可视化**：胜率分析、月度进展图表和难度表现统计

### 目标用户

- 视觉小说爱好者
- 交互式小说玩家
- 推理和侦探故事粉丝
- 对 AI 驱动叙事游戏感兴趣的开发者

## 🏗️ 架构文档

### 前端框架

- **Vue.js 3.5.17** 使用组合式 API
- **TypeScript 5.x** 提供类型安全
- **Vite 5.x** 用于快速开发和构建

### 主要依赖

- **Vue 3**：核心框架，具有响应式组合 API
- **TypeScript**：静态类型和增强的开发体验
- **Vite**：现代构建工具和开发服务器
- **ESLint**：代码检查和格式化

### 项目结构

```
jubenshaa/
├── src/
│   ├── components/          # Vue 组件
│   │   ├── GalgameInterface.vue    # 主游戏界面
│   │   ├── CharacterPanel.vue      # 角色显示和信息
│   │   ├── DialogueSystem.vue      # 对话渲染和控制
│   │   ├── BackgroundSystem.vue    # 动态背景
│   │   ├── SceneTransition.vue     # 场景转换效果
│   │   ├── ControlPanel.vue        # 游戏控制（重启、自动、历史）
│   │   ├── HistoryModal.vue        # 对话历史查看器
│   │   ├── AISelector.vue          # AI 模型选择界面
│   │   └── QuestionSelector.vue    # 问题模板选择器
│   ├── composables/         # 可复用的组合函数
│   │   ├── useGameData.ts          # 角色和场景数据管理
│   │   ├── useDialogueSystem.ts    # 对话状态和打字效果
│   │   ├── useSceneTransition.ts   # 场景转换逻辑
│   │   ├── useAISelection.ts       # AI 模型管理
│   │   ├── useQuestionTemplates.ts # 问题分类和模板
│   │   └── useInteractionSystem.ts # 用户交互处理
│   ├── App.vue             # 根应用组件
│   ├── main.ts             # 应用入口点
│   └── style.css           # 全局样式
├── public/                 # 静态资源
├── package.json            # 依赖和脚本
├── vite.config.ts          # Vite 配置
├── tsconfig.json           # TypeScript 配置
└── README.md               # 英文说明文档
```

### 组件架构

应用采用模块化组件架构：

- **GalgameInterface**：主容器组件，管理布局、状态和组件通信
- **CharacterPanel**：显示活跃角色信息、肖像和 AI 模型详情
- **DialogueSystem**：处理文本渲染、打字效果和用户输入
- **侧边栏组件**：角色选择、问题模板和 AI 模型切换
- **工具组件**：背景系统、场景转换和控制面板

### 状态管理

应用使用 Vue 3 的组合式 API 和自定义组合函数进行状态管理：

- **useGameData**：管理角色数据库、场景背景和脚本数据
- **useDialogueSystem**：控制对话状态、打字效果和场景进展
- **useAISelection**：处理 AI 模型选择和角色到 AI 的映射
- **useInteractionSystem**：处理用户问题并生成上下文回应

## 🚀 安装和本地开发

### 前置要求

- **Node.js**：版本 18.0.0 或更高
- **npm**：版本 8.0.0 或更高（或等效的 yarn/pnpm）

### 安装步骤

1. **克隆仓库**

   ```bash
   git clone <repository-url>
   cd jubensha2/jubenshaa
   ```

2. **安装依赖**

   ```bash
   npm install
   ```

3. **启动开发服务器**

   ```bash
   npm run dev
   ```

4. **在浏览器中打开**
   导航到 `http://localhost:3000`（自动打开）

### 可用脚本

- `npm run dev` - 启动带热重载的开发服务器
- `npm run build` - 生产构建（TypeScript 编译 + Vite 构建）
- `npm run preview` - 本地预览生产构建
- `npm run lint` - 运行 ESLint 进行代码质量检查

### 环境配置

应用使用默认的 Vite 配置运行。基本功能不需要额外的环境变量。

## 📖 使用指南

### 主页操作

1. **浏览剧本**：

   - 在主页网格中浏览所有可用剧本
   - 使用搜索框按名称、作者或标签搜索剧本
   - 点击分类按钮筛选不同类型的剧本
   - 使用分页控件浏览更多剧本

2. **查看剧本详情**：

   - 点击任意剧本卡片查看详细信息
   - 右侧详情面板显示故事简介、角色列表和游戏统计
   - 点击"开始游戏"按钮进入游戏界面

### 游戏界面操作

1. **主游戏区域（左面板 - 70%）**：

   - 查看角色肖像和对话
   - 点击推进场景
   - 使用控制面板进行游戏管理（返回主页、重启、自动推进、历史、设置）

2. **审讯侧边栏（右面板 - 30%）**：

   - 从下拉菜单选择角色
   - 从问题分类中选择或提出自定义问题
   - 在不同 AI 模型间切换以获得不同回应
   - 查看对话历史

### 角色审讯系统

1. **角色选择**：点击下拉菜单从可用角色中选择
2. **问题分类**：从预构建的问题模板中选择：
   - 案件调查 (🔍)
   - 时间线询问 (⏰)
   - 人际关系 (👥)
   - 动机分析 (💭)
   - 医学诊断 (🏥)
   - 心理分析 (🧠)
3. **自定义问题**：在输入框中输入您自己的问题
4. **AI 模型选择**：在不同 AI 个性间切换以获得不同视角

### UI 自定义

- **可调整布局**：拖拽主面板和侧边栏之间的分隔线调整宽度（20-50% 范围）
- **可拖拽面板**：调整大小时提供视觉反馈和流畅过渡
- **响应式设计**：界面适应不同屏幕尺寸

## 🛠️ 开发说明

### 代码组织原则

- **组合式 API**：利用 Vue 3 的组合式 API 实现更好的代码复用和组织
- **TypeScript 集成**：所有数据结构的完整类型安全和接口定义
- **模块化架构**：通过专用组合函数实现不同功能的关注点分离
- **组件通信**：采用 props 向下、事件向上的模式和响应式状态管理

### 核心组合函数

- **useGameData**：提供角色数据库、场景背景和脚本数据
- **useDialogueSystem**：管理对话状态、打字效果和场景进展
- **useSceneTransition**：处理场景间的流畅转换
- **useAISelection**：管理 AI 模型选择和角色映射
- **useQuestionTemplates**：组织问题分类和模板
- **useInteractionSystem**：处理用户交互并生成回应

### 组件通信模式

- **响应式状态**：通过组合函数共享状态
- **事件系统**：通过 props 和事件进行父子组件通信
- **计算属性**：用于 UI 响应性的派生状态
- **监听器**：副作用和状态同步

---

## 📝 许可证

此项目为私有和专有项目。

## 🤝 贡献

这是一个私有项目。请联系维护者获取贡献指南。

hello this is try hard,for init repository.
