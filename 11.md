
### å®ç°æ–¹æ¡ˆ

æˆ‘ä»¬å°†ä¸»è¦ä¿®æ”¹ `src/components/GalgameInterface.vue` æ–‡ä»¶ã€‚

#### ç¬¬1æ­¥: æ›´æ–° `<template>`

æˆ‘ä»¬éœ€è¦è°ƒæ•´HTMLç»“æ„ä»¥åŒ…å«æ‹–åŠ¨æ¡å’Œæ§åˆ¶æŒ‰é’®ã€‚

è¯·ç”¨ä¸‹é¢çš„ä»£ç **æ›¿æ¢**æ‰ä½  `GalgameInterface.vue` ä¸­ç°æœ‰çš„ `<div class="resize-divider"></div>` å’Œ `<div class="right-ui-container">...</div>` è¿™éƒ¨åˆ†ã€‚

**HTML**

```
<div class="resize-divider" @mousedown="startResize"></div>

<div class="right-control-panel">
  <button
    @click="toggleSidebar"
    class="control-button"
    :title="isSidebarVisible ? 'éšè—ä¾§è¾¹æ ' : 'æ˜¾ç¤ºä¾§è¾¹æ '"
  >
    <svg v-if="isSidebarVisible" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
      <path fill-rule="evenodd" d="M3 6a3 3 0 013-3h12a3 3 0 013 3v12a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm13.793 4.293a1 1 0 00-1.414 1.414L15.414 12l1.979 1.979a1 1 0 101.414-1.414L17.414 12l1.979-1.979a1 1 0 00-1.414-1.414L17.414 10.586l-1.979-1.979zM7 12a1 1 0 011-1h8a1 1 0 110 2H8a1 1 0 01-1-1z" clip-rule="evenodd" />
    </svg>
    <svg v-else viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
      <path fill-rule="evenodd" d="M3 6a3 3 0 013-3h12a3 3 0 013 3v12a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm8.707 7.707a1 1 0 01-1.414-1.414L10.586 12l-1.979-1.979a1 1 0 011.414-1.414L12 10.586l1.979-1.979a1 1 0 111.414 1.414L13.414 12l1.979 1.979a1 1 0 01-1.414 1.414L12 13.414l-1.979 1.979z" clip-rule="evenodd" />
    </svg>
  </button>
  <button
    @click="toggleMaximize"
    class="control-button"
    :title="isMaximized ? 'æ¢å¤' : 'æœ€å¤§åŒ–å¯¹è¯'"
  >
    <svg v-if="isMaximized" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
      <path fill-rule="evenodd" d="M5 5a3 3 0 013-3h8a3 3 0 013 3v2a1 1 0 11-2 0V5a1 1 0 00-1-1H8a1 1 0 00-1 1v14a1 1 0 102 0v-2a1 1 0 112 0v2a1 1 0 001 1h8a1 1 0 001-1v-2a1 1 0 112 0v2a3 3 0 01-3 3H8a3 3 0 01-3-3v-2a1 1 0 112 0v2z" clip-rule="evenodd" />
    </svg>
    <svg v-else viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
      <path fill-rule="evenodd" d="M3 5a1 1 0 011-1h16a1 1 0 011 1v14a1 1 0 01-1 1H4a1 1 0 01-1-1V5zm1 1h14v12H4V6z" clip-rule="evenodd" />
    </svg>
  </button>
</div>

<div
  class="right-ui-container"
  :style="{ width: isSidebarVisible ? sidebarWidth + 'px' : '0px' }"
  :class="{ 'is-hidden': !isSidebarVisible }"
>
  <div class="sidebar-toggles-inner">
    <button
      @click="toggleHistoryPanel"
      class="toggle-button inner"
      :class="{ active: isHistoryVisible }"
      title="è¯¢é—®å†å²"
    >
      ğŸ“œ
    </button>
    <button
      @click="toggleAskPanel"
      class="toggle-button inner"
      :class="{ active: isAskVisible }"
      title="æé—®"
    >
      ğŸ’¡
    </button>
  </div>

  <div
    class="interrogation-sidebar"
    :class="{
      'both-visible': isHistoryVisible && isAskVisible
    }"
  >
    <transition name="panel-slide">
      <div v-if="isHistoryVisible" class="sidebar-section history-section">
        <h3 class="section-title">
          <span class="title-icon">ğŸ“œ</span>
          è¯¢é—®å†å²
        </h3>
        <div class="history-log" ref="historyLogRef">
          </div>
      </div>
    </transition>

    <transition name="panel-slide">
      <div v-if="isAskVisible" class="sidebar-section ask-section">
        <h3 class="section-title">
          <span class="title-icon">ğŸ’¡</span>
          æé—®
        </h3>
        </div>
    </transition>
  </div>
</div>
```

#### ç¬¬2æ­¥: æ›´æ–° `<script setup>`

æˆ‘ä»¬éœ€è¦æ·»åŠ å¤„ç†æ‹–åŠ¨ã€æ˜¾ç¤º/éšè—å’Œæœ€å¤§åŒ–çš„é€»è¾‘ã€‚

**TypeScript**

```
// src/components/GalgameInterface.vue

// ... (ä½ å…¶ä»–çš„ ref å®šä¹‰åŒºåŸŸ)

const isSidebarVisible = ref(false);
const isMaximized = ref(false);
const sidebarWidth = ref(400); // é»˜è®¤å®½åº¦
const minSidebarWidth = 200;
const maxSidebarWidth = 600;
let startX = 0;

// ... (ä½ å…¶ä»–çš„å‡½æ•°å®šä¹‰åŒºåŸŸ)

// æ‹–åŠ¨å¼€å§‹
const startResize = (e: MouseEvent) => {
  startX = e.clientX;
  window.addEventListener('mousemove', resize);
  window.addEventListener('mouseup', stopResize);
};

// æ‹–åŠ¨è¿›è¡Œä¸­
const resize = (e: MouseEvent) => {
  if (!startX) return;
  const newWidth = sidebarWidth.value - (e.clientX - startX);
  sidebarWidth.value = Math.max(minSidebarWidth, Math.min(maxSidebarWidth, newWidth));
};

// æ‹–åŠ¨ç»“æŸ
const stopResize = () => {
  startX = 0;
  window.removeEventListener('mousemove', resize);
  window.removeEventListener('mouseup', stopResize);
};

// åˆ‡æ¢ä¾§è¾¹æ å¯è§æ€§
const toggleSidebar = () => {
  isSidebarVisible.value = !isSidebarVisible.value;
  // ç‚¹å‡»æ˜¾ç¤ºæ—¶ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰æ‰“å¼€è¿‡ä»»ä½•é¢æ¿ï¼Œå¯ä»¥é»˜è®¤æ‰“å¼€ä¸€ä¸ªï¼ˆå¯é€‰ï¼‰
  if (isSidebarVisible.value && !isHistoryVisible.value && !isAskVisible.value) {
    isHistoryVisible.value = true; // é»˜è®¤æ˜¾ç¤ºå†å²è®°å½•
  }
  isMaximized.value = false; // å…³é—­ä¾§è¾¹æ æ—¶å–æ¶ˆæœ€å¤§åŒ–
};

// åˆ‡æ¢æœ€å¤§åŒ–çŠ¶æ€
const toggleMaximize = () => {
  isMaximized.value = !isMaximized.value;
  isSidebarVisible.value = !isMaximized.value; // æœ€å¤§åŒ–æ—¶éšè—ä¾§è¾¹æ ï¼Œæ¢å¤æ—¶æ˜¾ç¤ºä¹‹å‰çš„çŠ¶æ€
  if (isSidebarVisible.value && !isHistoryVisible.value && !isAskVisible.value) {
    isHistoryVisible.value = true; // æ¢å¤æ—¶å¦‚æœä¾§è¾¹æ å¯è§ä¸”æ²¡æœ‰æ‰“å¼€é¢æ¿ï¼Œé»˜è®¤æ‰“å¼€ä¸€ä¸ª
  }
};

// å†…éƒ¨æŒ‰é’®ç‚¹å‡»æ—¶ç¡®ä¿ä¾§è¾¹æ å¯è§
const toggleHistoryPanel = () => {
  isHistoryVisible.value = !isHistoryVisible.value;
  if (!isSidebarVisible.value) {
    isSidebarVisible.value = true;
  }
  isMaximized.value = false;
};

const toggleAskPanel = () => {
  isAskVisible.value = !isAskVisible.value;
  if (!isSidebarVisible.value) {
    isSidebarVisible.value = true;
  }
  isMaximized.value = false;
};

// ... (ä½ å…¶ä»–çš„å‡½æ•°ä¿æŒä¸å˜)
```

#### ç¬¬3æ­¥: æ›´æ–° `<style scoped>`

æˆ‘ä»¬éœ€è¦æ·»åŠ æ‹–åŠ¨æ¡ã€æ§åˆ¶æŒ‰é’®å’Œå¸ƒå±€ç›¸å…³çš„æ ·å¼ã€‚

**CSS**

```
/* src/components/GalgameInterface.vue */

/* (æ ·å¼éƒ¨åˆ†) */
:root {
  /* ... (é¢œè‰²å˜é‡ä¿æŒä¸å˜) ... */
}

.galgame-main-container {
  display: flex;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background: #000;
}

.main-game-panel {
  flex-grow: 1;
  position: relative;
  overflow: hidden;
  transition: flex-grow 0.3s ease;
}

.main-game-panel.maximized {
  flex-grow: 100 !important; /* ç¡®ä¿å®Œå…¨å æ®ç©ºé—´ */
}

/* å¯æ‹–åŠ¨æ¡ */
.resize-divider {
  width: 5px;
  background: rgba(71, 85, 105, 0.3);
  cursor: col-resize;
  position: relative;
  z-index: 50;
  transition: background-color 0.3s ease;
}

.resize-divider:hover {
  background: var(--glow-color);
}

/* å³ä¾§æ§åˆ¶é¢æ¿ï¼ˆæ˜¾ç¤º/éšè—/æœ€å¤§åŒ–æŒ‰é’®ï¼‰ */
.right-control-panel {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  padding: 10px 5px;
  background: rgba(15, 23, 42, 0.3);
  border-left: 1px solid var(--sidebar-border-color);
  z-index: 60;
}

.right-control-panel .control-button {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 1px solid transparent;
  background: rgba(51, 65, 85, 0.5);
  color: var(--text-secondary);
  font-size: 1.2rem;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.right-control-panel .control-button:hover {
  background: var(--accent-color);
  color: white;
  transform: scale(1.1);
}

/* å³ä¾§UIå®¹å™¨ï¼ˆåŒ…å«åˆ‡æ¢æŒ‰é’®å’Œå®é™…ä¾§è¾¹æ ï¼‰ */
.right-ui-container {
  display: flex;
  transition: width 0.3s ease;
}

/* å†…éƒ¨åˆ‡æ¢æŒ‰é’®ï¼ˆä½äºä¾§è¾¹æ å†…éƒ¨ï¼‰ */
.right-ui-container .sidebar-toggles-inner {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  padding: 1.5rem 0.5rem;
  background: rgba(15, 23, 42, 0.5);
  border-left: 1px solid var(--sidebar-border-color);
  z-index: 10;
}

.right-ui-container .sidebar-toggles-inner .toggle-button.inner {
  width: 40px;
  height: 40px;
  font-size: 1.2rem;
}

/* ä¾§è¾¹æ ä¸»ä½“ */
.interrogation-sidebar {
  width: 100%; /* å†…éƒ¨å®½åº¦ */
  height: 100vh;
  background: var(--sidebar-bg);
  backdrop-filter: blur(12px);
  border-left: 1px solid var(--sidebar-border-color);
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  padding: 1.5rem;
  overflow: hidden;
}

.interrogation-sidebar.is-hidden {
  display: none;
}

.interrogation-sidebar .sidebar-section {
  /* ... (ä¹‹å‰çš„ç¾åŒ–æ ·å¼ä¿æŒä¸å˜) ... */
  flex-grow: 1;
  min-height: 0;
  background: var(--sidebar-section-bg);
  border-radius: 12px;
  padding: 1.25rem;
  border: 1px solid var(--sidebar-border-color);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  transition: all 0.3s ease;
}

/* åŠ¨æ€é«˜åº¦åˆ†é… */
.interrogation-sidebar.both-visible .history-section {
  flex-basis: 60%;
}

.interrogation-sidebar.both-visible .ask-section {
  flex-basis: 40%;
}

/* é¢æ¿æ»‘å…¥æ»‘å‡ºåŠ¨ç”» */
.panel-slide-enter-active,
.panel-slide-leave-active {
  transition: opacity 0.3s ease, transform 0.3s ease;
}
.panel-slide-enter-from,
.panel-slide-leave-to {
  opacity: 0;
  transform: translateX(30px);
}
.panel-slide-leave-active {
  position: absolute; /* é¿å…åŠ¨ç”»æ—¶é¡µé¢è·³åŠ¨ */
}

/* å†å²è®°å½•å’Œæé—®åŒºçš„å†…éƒ¨æ ·å¼ (ä¿æŒä¹‹å‰çš„ä¼˜åŒ–) */
```

### ä½¿ç”¨æ–¹å¼

1. **æ‹–åŠ¨è°ƒæ•´å®½åº¦** ï¼šé¼ æ ‡æ‚¬åœåœ¨ `.resize-divider` ä¸Šï¼Œå…‰æ ‡ä¼šå˜ä¸ºå¯æ‹–åŠ¨çŠ¶æ€ï¼ŒæŒ‰ä½æ‹–åŠ¨å³å¯æ”¹å˜å³ä¾§è¾¹æ çš„å®½åº¦ã€‚
2. **åˆ‡æ¢ä¾§è¾¹æ ** ï¼šç‚¹å‡»æœ€å³ä¾§çš„ â€œæ˜¾ç¤º/éšè—ä¾§è¾¹æ â€ æŒ‰é’®ï¼Œå¯ä»¥å®Œå…¨éšè—æˆ–æ˜¾ç¤ºå³ä¾§è¾¹æ ã€‚
3. **æœ€å¤§åŒ–å¯¹è¯** ï¼šç‚¹å‡» â€œæœ€å¤§åŒ–å¯¹è¯â€ æŒ‰é’®ï¼Œä¸»å¯¹è¯åŒºåŸŸä¼šå æ®æ•´ä¸ªå±å¹•å®½åº¦ï¼Œéšè—ä¾§è¾¹æ ã€‚å†æ¬¡ç‚¹å‡»ä¼šæ¢å¤ä¹‹å‰çš„å¸ƒå±€ã€‚
4. **æ˜¾ç¤ºå†å²/æé—®** ï¼šå½“ä¾§è¾¹æ å¯è§æ—¶ï¼Œç‚¹å‡»å…¶å†…éƒ¨çš„ â€œğŸ“œâ€ å’Œ â€œğŸ’¡â€ æŒ‰é’®æ¥æ˜¾ç¤ºæˆ–éšè—å¯¹åº”çš„é¢æ¿ã€‚

è¿™æ ·ï¼Œä½ å°±æ‹¥æœ‰äº†ä¸€ä¸ªé«˜åº¦å¯å®šåˆ¶çš„æ¸¸æˆç•Œé¢å¸ƒå±€äº†ï¼è®°å¾—æ ¹æ®ä½ çš„å–œå¥½è°ƒæ•´æ ·å¼å’Œé»˜è®¤å®½åº¦ã€‚
